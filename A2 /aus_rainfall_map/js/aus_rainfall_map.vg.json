{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "width": 800,
  "height": 600,
  "title": "Average Rainfall Across Australian Weather Stations",
  "projection": {
    "type": "mercator",
    "center": [134, -28],
    "scale": 1000
  },
  "layer": [
    {
      "data": {
        "url": "https://raw.githubusercontent.com/FIT3179/Vega-Lite/main/3_choropleth_map/js/ne_110m_admin_0_countries.topojson",
        "format": {
          "type": "topojson",
          "feature": "ne_110m_admin_0_countries"
        }
      },
      "transform": [
        {
          "calculate": "datum.properties.NAME=='Australia' ? 'Australia' : 'Other'",
          "as": "country_type"
        }
      ],
      "mark": {
        "type": "geoshape",
        "stroke": "white",
        "strokeWidth": 1
      },
      "encoding": {
        "fill": {
          "field": "country_type",
          "type": "nominal",
          "scale": {
            "domain": ["Australia", "Other"],
            "range": ["lightgray", "#eee"]
          }
        }
      }
    },
    {
      "data": {
        "values": [
          {"Location": "Albury", "latitude": -36.0737, "longitude": 146.9135, "Rainfall": 0},
          {"Location": "Sydney", "latitude": -33.8688, "longitude": 151.2093, "Rainfall": 0},
          {"Location": "Melbourne", "latitude": -37.8136, "longitude": 144.9631, "Rainfall": 0},
          {"Location": "Brisbane", "latitude": -27.4698, "longitude": 153.0251, "Rainfall": 0},
          {"Location": "Perth", "latitude": -31.9505, "longitude": 115.8605, "Rainfall": 0},
          {"Location": "Adelaide", "latitude": -34.9285, "longitude": 138.6007, "Rainfall": 0},
          {"Location": "Hobart", "latitude": -42.8821, "longitude": 147.3272, "Rainfall": 0},
          {"Location": "Darwin", "latitude": -12.4634, "longitude": 130.8456, "Rainfall": 0}
        ]
      },
      "mark": {
        "type": "circle",
        "size": 100,
        "opacity": 0.8,
        "stroke": "white",
        "strokeWidth": 1
      },
      "encoding": {
        "longitude": {"field": "longitude", "type": "quantitative"},
        "latitude": {"field": "latitude", "type": "quantitative"},
        "color": {
          "field": "Rainfall",
          "type": "quantitative",
          "title": "Average Rainfall (mm)",
          "scale": {
            "type": "sequential",
            "scheme": "blues"
          }
        },
        "tooltip": [
          {"field": "Location", "type": "nominal", "title": "Location"},
          {"field": "Rainfall", "type": "quantitative", "title": "Average Rainfall (mm)"}
        ]
      }
    }
  ]
}
